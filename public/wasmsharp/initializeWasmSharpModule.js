import { dotnet as dotnetHostBuilder, } from "./dotnet.js";
function getDirectory(path) {
    var index = path.lastIndexOf("/");
    if (index !== -1) {
        return path.substring(0, index + 1);
    }
    else {
        return path;
    }
}
export async function initializeWasmSharpModule(options, callbacks) {
    const hostBuilder = dotnetHostBuilder;
    const time = performance.now();
    let resourcesToLoad = 0;
    const { getAssemblyExports, getConfig } = await hostBuilder
        .withModuleConfig({
        onConfigLoaded(config) {
            resourcesToLoad = Object.keys(config.resources?.assembly ?? {}).length;
            resourcesToLoad += Object.keys(config.resources?.pdb ?? {}).length;
            resourcesToLoad += Object.keys(config.resources?.icu ?? {}).length;
            //we are off by one when using the above - maybe its the wasm module, maybe its something else. Either way, this resolves the issue for now
            resourcesToLoad += 1;
            callbacks?.onConfigLoaded?.(config);
        },
        onDownloadResourceProgress(loaded, total) {
            callbacks?.onDownloadResourceProgress?.(loaded, resourcesToLoad);
        },
    })
        .withDiagnosticTracing(options?.enableDiagnosticTracing ?? false)
        //workaround https://github.com/dotnet/runtime/issues/94238
        //.withDebugging(options?.debugLevel ?? 1)
        .withConfig({
        debugLevel: options?.debugLevel ?? 0,
    })
        .withConfig({
        //TODO: Figure out why we need this, broken since dotnet sdk update to 8.0.101
        disableIntegrityCheck: true,
    })
        .create();
    const config = getConfig();
    console.log("WasmSharp: Config loaded", config);
    const assemblyExports = await getAssemblyExports(config.mainAssemblyName);
    const compilationInterop = assemblyExports.WasmSharp.Core.CompilationInterop;
    //TODO: Rewrite this to use new URL()
    const resolvedAssembliesUrl = new URL(options?.assembliesUrl ?? getDirectory(import.meta.url));
    const diff1 = performance.now() - time;
    console.log(`Finished initialising runtime in ${diff1}ms`);
    console.log(`Using following location for assemblies: ${resolvedAssembliesUrl}`);
    const resources = config.resources;
    if (!resources) {
        throw new Error("WasmSharp: No resources found in config");
    }
    if (!resources.assembly || !resources.coreAssembly || !resources.satelliteResources) {
        throw new Error("WasmSharp: config is malformed, no assemblies found");
    }
    const assembliesAssets = resources.coreAssembly.concat(resources.assembly);
    const satelliteAssemblies = Object.values(resources.satelliteResources).flatMap((assets) => assets);
    const assemblies = assembliesAssets
        .map((x) => x)
        .concat(satelliteAssemblies)
        .filter((x) => {
        if (!x.resolvedUrl) {
            console.debug("WasmSharp: resolved URL is empty, skipping assembly", x.virtualPath);
        }
        return !!x.resolvedUrl;
    })
        .map((x) => new URL(x.resolvedUrl, resolvedAssembliesUrl).href);
    await compilationInterop.InitAsync(assemblies);
    const diff2 = performance.now() - time;
    console.log(`Finished loading assemblies in ${diff2}ms`);
    return compilationInterop;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5pdGlhbGl6ZVdhc21TaGFycE1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2luaXRpYWxpemVXYXNtU2hhcnBNb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLE1BQU0sSUFBSSxpQkFBaUIsR0FJNUIsTUFBTSxhQUFhLENBQUM7QUFPckIsU0FBUyxZQUFZLENBQUMsSUFBWTtJQUNoQyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2xDLElBQUksS0FBSyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDakIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDdEMsQ0FBQztTQUFNLENBQUM7UUFDTixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7QUFDSCxDQUFDO0FBRUQsTUFBTSxDQUFDLEtBQUssVUFBVSx5QkFBeUIsQ0FDN0MsT0FBMkMsRUFDM0MsU0FBK0M7SUFNL0MsTUFBTSxXQUFXLEdBQXlCLGlCQUF5QyxDQUFDO0lBRXBGLE1BQU0sSUFBSSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUMvQixJQUFJLGVBQWUsR0FBRyxDQUFDLENBQUM7SUFDeEIsTUFBTSxFQUFFLGtCQUFrQixFQUFFLFNBQVMsRUFBRSxHQUFHLE1BQU0sV0FBVztTQUN4RCxnQkFBZ0IsQ0FBQztRQUNoQixjQUFjLENBQUMsTUFBa0I7WUFDL0IsZUFBZSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsRUFBRSxRQUFRLElBQUksRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDO1lBQ3ZFLGVBQWUsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQztZQUNuRSxlQUFl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LEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLFdBQVksRUFBRSxxQkFBcUIsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRW5FLE1BQU0sa0JBQWtCLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sS0FBSyxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7SUFDdkMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQ0FBa0MsS0FBSyxJQUFJLENBQUMsQ0FBQztJQUN6RCxPQUFPLGtCQUFrQixDQUFDO0FBQzVCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIGRvdG5ldCBhcyBkb3RuZXRIb3N0QnVpbGRlcixcclxuICB0eXBlIE1vbm9Db25maWcsXHJcbiAgdHlwZSBEb3RuZXRNb2R1bGVDb25maWcsXHJcbiAgRG90bmV0SG9zdEJ1aWxkZXIsXHJcbn0gZnJvbSBcIi4vZG90bmV0LmpzXCI7XHJcbmltcG9ydCB0eXBlIHtcclxuICBXYXNtU2hhcnBNb2R1bGVPcHRpb25zLFxyXG4gIEFzc2VtYmx5RXhwb3J0cyxcclxuICBXYXNtU2hhcnBNb2R1bGVDYWxsYmFja3MsXHJcbn0gZnJvbSBcIi4vV2FzbUNvbXBpbGVyLmpzXCI7XHJcblxyXG5mdW5jdGlvbiBnZXREaXJlY3RvcnkocGF0aDogc3RyaW5nKSB7XHJcbiAgdmFyIGluZGV4ID0gcGF0aC5sYXN0SW5kZXhPZihcIi9cIik7XHJcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgcmV0dXJuIHBhdGguc3Vic3RyaW5nKDAsIGluZGV4ICsgMSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBwYXRoO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRpYWxpemVXYXNtU2hhcnBNb2R1bGUoXHJcbiAgb3B0aW9uczogV2FzbVNoYXJwTW9kdWxlT3B0aW9ucyB8IHVuZGVmaW5lZCxcclxuICBjYWxsYmFja3M6IFdhc21TaGFycE1vZHVsZUNhbGxiYWNrcyB8IHVuZGVmaW5lZFxyXG4pIHtcclxuICB0eXBlIEludGVybmFsc0hvc3RCdWlsZGVyID0gRG90bmV0SG9zdEJ1aWxkZXIgJiB7XHJcbiAgICAvL2ludGVybmFsIG1ldGhvZDogaHR0cHM6Ly9naXRodWIuY29tL2RvdG5ldC9ydW50aW1lL2Jsb2IvYTI3MDE0MDI4MWExM2FiODJhNDQwMWRmZjNkYTZkMjdmZTQ5OTA4Ny9zcmMvbW9uby93YXNtL3J1bnRpbWUvbG9hZGVyL3J1bi50cyNMMjZcclxuICAgIHdpdGhNb2R1bGVDb25maWcoY29uZmlnOiBEb3RuZXRNb2R1bGVDb25maWcpOiBJbnRlcm5hbHNIb3N0QnVpbGRlcjtcclxuICB9O1xyXG4gIGNvbnN0IGhvc3RCdWlsZGVyOiBJbnRlcm5hbHNIb3N0QnVpbGRlciA9IGRvdG5ldEhvc3RCdWlsZGVyIGFzIEludGVybmFsc0hvc3RCdWlsZGVyO1xyXG5cclxuICBjb25zdCB0aW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcbiAgbGV0IHJlc291cmNlc1RvTG9hZCA9IDA7XHJcbiAgY29uc3QgeyBnZXRBc3NlbWJseUV4cG9ydHMsIGdldENvbmZpZyB9ID0gYXdhaXQgaG9zdEJ1aWxkZXJcclxuICAgIC53aXRoTW9kdWxlQ29uZmlnKHtcclxuICAgICAgb25Db25maWdMb2FkZWQoY29uZmlnOiBNb25vQ29uZmlnKSB7XHJcbiAgICAgICAgcmVzb3VyY2VzVG9Mb2FkID0gT2JqZWN0LmtleXMoY29uZmlnLnJlc291cmNlcz8uYXNzZW1ibHkgPz8ge30pLmxlbmd0aDtcclxuICAgICAgICByZXNvdXJjZXNUb0xvYWQgKz0gT2JqZWN0LmtleXMoY29uZmlnLnJlc291cmNlcz8ucGRiID8/IHt9KS5sZW5ndGg7XHJcbiAgICAgICAgcmVzb3VyY2VzVG9Mb2FkICs9IE9iamVjdC5rZXlzKGNvbmZpZy5yZXNvdXJjZXM/LmljdSA/PyB7fSkubGVuZ3RoO1xyXG4gICAgICAgIC8vd2UgYXJlIG9mZiBieSBvbmUgd2hlbiB1c2luZyB0aGUgYWJvdmUgLSBtYXliZSBpdHMgdGhlIHdhc20gbW9kdWxlLCBtYXliZSBpdHMgc29tZXRoaW5nIGVsc2UuIEVpdGhlciB3YXksIHRoaXMgcmVzb2x2ZXMgdGhlIGlzc3VlIGZvciBub3dcclxuICAgICAgICByZXNvdXJjZXNUb0xvYWQgKz0gMTtcclxuICAgICAgICBjYWxsYmFja3M/Lm9uQ29uZmlnTG9hZGVkPy4oY29uZmlnKTtcclxuICAgICAgfSxcclxuICAgICAgb25Eb3dubG9hZFJlc291cmNlUHJvZ3Jlc3MobG9hZGVkOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpIHtcclxuICAgICAgICBjYWxsYmFja3M/Lm9uRG93bmxvYWRSZXNvdXJjZVByb2dyZXNzPy4obG9hZGVkLCByZXNvdXJjZXNUb0xvYWQpO1xyXG4gICAgICB9LFxyXG4gICAgfSlcclxuICAgIC53aXRoRGlhZ25vc3RpY1RyYWNpbmcob3B0aW9ucz8uZW5hYmxlRGlhZ25vc3RpY1RyYWNpbmcgPz8gZmFsc2UpXHJcbiAgICAvL3dvcmthcm91bmQgaHR0cHM6Ly9naXRodWIuY29tL2RvdG5ldC9ydW50aW1lL2lzc3Vlcy85NDIzOFxyXG4gICAgLy8ud2l0aERlYnVnZ2luZyhvcHRpb25zPy5kZWJ1Z0xldmVsID8/IDEpXHJcbiAgICAud2l0aENvbmZpZyh7XHJcbiAgICAgIGRlYnVnTGV2ZWw6IG9wdGlvbnM/LmRlYnVnTGV2ZWwgPz8gMCxcclxuICAgIH0pXHJcbiAgICAud2l0aENvbmZpZyh7XHJcbiAgICAgIC8vVE9ETzogRmlndXJlIG91dCB3aHkgd2UgbmVlZCB0aGlzLCBicm9rZW4gc2luY2UgZG90bmV0IHNkayB1cGRhdGUgdG8gOC4wLjEwMVxyXG4gICAgICBkaXNhYmxlSW50ZWdyaXR5Q2hlY2s6IHRydWUsXHJcbiAgICB9KVxyXG4gICAgLmNyZWF0ZSgpO1xyXG5cclxuICBjb25zdCBjb25maWcgPSBnZXRDb25maWcoKTtcclxuICBjb25zb2xlLmxvZyhcIldhc21TaGFycDogQ29uZmlnIGxvYWRlZFwiLCBjb25maWcpO1xyXG4gIGNvbnN0IGFzc2VtYmx5RXhwb3J0czogQXNzZW1ibHlFeHBvcnRzID0gYXdhaXQgZ2V0QXNzZW1ibHlFeHBvcnRzKGNvbmZpZy5tYWluQXNzZW1ibHlOYW1lISk7XHJcbiAgY29uc3QgY29tcGlsYXRpb25JbnRlcm9wID0gYXNzZW1ibHlFeHBvcnRzLldhc21TaGFycC5Db3JlLkNvbXBpbGF0aW9uSW50ZXJvcDtcclxuICAvL1RPRE86IFJld3JpdGUgdGhpcyB0byB1c2UgbmV3IFVSTCgpXHJcbiAgY29uc3QgcmVzb2x2ZWRBc3NlbWJsaWVzVXJsID0gbmV3IFVSTChvcHRpb25zPy5hc3NlbWJsaWVzVXJsID8/IGdldERpcmVjdG9yeShpbXBvcnQubWV0YS51cmwpKTtcclxuICBjb25zdCBkaWZmMSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gdGltZTtcclxuICBjb25zb2xlLmxvZyhgRmluaXNoZWQgaW5pdGlhbGlzaW5nIHJ1bnRpbWUgaW4gJHtkaWZmMX1tc2ApO1xyXG4gIGNvbnNvbGUubG9nKGBVc2luZyBmb2xsb3dpbmcgbG9jYXRpb24gZm9yIGFzc2VtYmxpZXM6ICR7cmVzb2x2ZWRBc3NlbWJsaWVzVXJsfWApO1xyXG4gIGNvbnN0IHJlc291cmNlcyA9IGNvbmZpZy5yZXNvdXJjZXM7XHJcblxyXG4gIGlmICghcmVzb3VyY2VzKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJXYXNtU2hhcnA6IE5vIHJlc291cmNlcyBmb3VuZCBpbiBjb25maWdcIik7XHJcbiAgfVxyXG5cclxuICBpZiAoIXJlc291cmNlcy5hc3NlbWJseSB8fCAhcmVzb3VyY2VzLmNvcmVBc3NlbWJseSB8fCAhcmVzb3VyY2VzLnNhdGVsbGl0ZVJlc291cmNlcykge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiV2FzbVNoYXJwOiBjb25maWcgaXMgbWFsZm9ybWVkLCBubyBhc3NlbWJsaWVzIGZvdW5kXCIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgYXNzZW1ibGllc0Fzc2V0cyA9IHJlc291cmNlcy5jb3JlQXNzZW1ibHkuY29uY2F0KHJlc291cmNlcy5hc3NlbWJseSk7XHJcbiAgY29uc3Qgc2F0ZWxsaXRlQXNzZW1ibGllcyA9IE9iamVjdC52YWx1ZXMocmVzb3VyY2VzLnNhdGVsbGl0ZVJlc291cmNlcykuZmxhdE1hcChcclxuICAgIChhc3NldHMpID0+IGFzc2V0c1xyXG4gICk7XHJcblxyXG4gIGNvbnN0IGFzc2VtYmxpZXMgPSBhc3NlbWJsaWVzQXNzZXRzXHJcbiAgICAubWFwKCh4KSA9PiB4KVxyXG4gICAgLmNvbmNhdChzYXRlbGxpdGVBc3NlbWJsaWVzKVxyXG4gICAgLmZpbHRlcigoeCkgPT4ge1xyXG4gICAgICBpZiAoIXgucmVzb2x2ZWRVcmwpIHtcclxuICAgICAgICBjb25zb2xlLmRlYnVnKFwiV2FzbVNoYXJwOiByZXNvbHZlZCBVUkwgaXMgZW1wdHksIHNraXBwaW5nIGFzc2VtYmx5XCIsIHgudmlydHVhbFBhdGgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAhIXgucmVzb2x2ZWRVcmw7XHJcbiAgICB9KVxyXG4gICAgLm1hcCgoeCkgPT4gbmV3IFVSTCh4LnJlc29sdmVkVXJsISwgcmVzb2x2ZWRBc3NlbWJsaWVzVXJsKS5ocmVmKTtcclxuXHJcbiAgYXdhaXQgY29tcGlsYXRpb25JbnRlcm9wLkluaXRBc3luYyhhc3NlbWJsaWVzKTtcclxuICBjb25zdCBkaWZmMiA9IHBlcmZvcm1hbmNlLm5vdygpIC0gdGltZTtcclxuICBjb25zb2xlLmxvZyhgRmluaXNoZWQgbG9hZGluZyBhc3NlbWJsaWVzIGluICR7ZGlmZjJ9bXNgKTtcclxuICByZXR1cm4gY29tcGlsYXRpb25JbnRlcm9wO1xyXG59XHJcbiJdfQ==